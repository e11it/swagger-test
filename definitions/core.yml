CreateNode:
  type: object
  required:
    - "name"
    - "prev_id"
  properties:
    signal_id:
      type: integer
      example: 1
    directory_id:
      type: integer
      example: 1
    name:
      type: string
      pattern: "^[A-Za-z0-9_.]{2,50}$"
      example: "node1"
    description:
      type: string
      pattern: "^.{2,200}$"
      example: "Description"
    comment:
      type: string
      pattern: "^.{2,200}$"
      example: "Comment"
    meta:
      type: string
      pattern: "^.{2,200}$"
      example: "meta"
    prev_id:
      type: integer
      example: 1
    acl:
      type: object

NodeObject:
  type: object
  required:
    - "id"
    - "name"
    - "prev_id"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    name:
      type: string
      example: "some_node"
    prev_id:
      type: integer
      example: 0
    signal_id:
      type: integer
      example: 1
    directory_id:
      type: integer
      example: 1
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    has_children:
      type: boolean
      x-nullable: true
      x-omitempty: true
      example: true
    acl:
      type: object

NodeWithSubtreeObject:
  type: object
  required:
    - "id"
    - "name"
    - "prev_id"
    - "full_name"
    - "directory"
    - "children"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    name:
      type: string
      example: "some_rule"
    prev_id:
      type: integer
      example: 0
    full_name:
      type: string
      example: "root/sub/leaf/node"
    directory:
      type: object
      $ref: "#/DirectoryObject"
    signals:
      type: object
      $ref: "#/SignalWithSubtreeObject"
    children:
      type: array
      items:
      $ref: "#/NodeWithSubtreeObject"
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"

UpdateNode:
  type: object
  properties:
    signal_id:
      type: integer
      example: 1
      x-nullable: true
    directory_id:
      type: integer
      example: 1
      x-nullable: true
    name:
      type: string
      pattern: "^[A-Za-z0-9_.]{2,50}$"
      example: "node1"
      x-nullable: true
    description:
      type: string
      pattern: "^.{2,200}$"
      example: "Description"
      x-nullable: true
    comment:
      type: string
      pattern: "^.{2,200}$"
      example: "Comment"
      x-nullable: true
    meta:
      type: string
      pattern: "^.{2,200}$"
      example: "meta"
      x-nullable: true
    prev_id:
      type: integer
      example: 1
      x-nullable: true
    acl:
      type: object

DirectoryObject:
  type: object
  required:
    - "id"
    - "name"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    name:
      type: string
      example: "some_directory"
    description:
      type: string
      pattern: "^.{2,200}$"
      example: "Description"
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"

# todo
SignalObject:
  type: object
  required:
    - "id"
    - "class"
    - "value_type"
    - "children"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    unit:
      type: string
      x-nullable: true
      x-omitempty: true
      example: "C"
      description: "Measurement unit"
    value_type:
      type: string
      example: "real"
      description: "Value data type"
      enum:
        - "undefined"
        - "integer"
        - "real"
        - "boolean"
    class:
      type: string
      example: "analog"
      description: ""
      enum:
        - "analog"
        - "discrete"
    children:
      type: array
      items:
      $ref: "#/SignalWithSubtreeObject"
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    acl:
      type: object


# todo
CreateSignal:
  type: object

# todo
UpdateSignal:
  type: object

SignalWithSubtreeObject:
  type: object
  required:
    - "id"
    - "class"
    - "value_type"
    - "children"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    unit:
      type: string
      x-nullable: true
      x-omitempty: true
      example: "C"
      description: "Measurement unit"
    value_type:
      type: string
      example: "real"
      description: "Value data type"
      enum:
        - "undefined"
        - "integer"
        - "real"
        - "boolean"
    class:
      type: string
      example: "analog"
      description: ""
      enum:
        - "analog"
        - "discrete"
    children:
      type: array
      items:
      $ref: "#/SignalWithSubtreeObject"
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    acl:
      type: object