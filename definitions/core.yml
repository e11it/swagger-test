CreateNode:
  type: object
  required:
    - "name"
    - "prev_id"
  properties:
    signal_id:
      type: integer
      example: 1
    directory_id:
      type: integer
      example: 1
    name:
      type: string
      pattern: "^[A-Za-z0-9_.]{2,50}$"
      example: "node1"
    description:
      type: string
      pattern: "^.{2,200}$"
      example: "Tag"
    comment:
      type: string
      pattern: "^.{2,200}$"
      example: "Comment"
    meta:
      type: string
      pattern: "^.{2,200}$"
      example: "meta"
    prev_id:
      type: integer
      example: 1

NodeObject:
  type: object
  required:
    - "id"
    - "name"
    - "prev_id"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    name:
      type: string
      example: "some_tag"
    prev_id:
      type: integer
      example: 0
    children:
      type: array
      items:
      $ref: "#/NodeWithSubtreeObject"
    signal_id:
      type: integer
      example: 1
    directory_id:
      type: integer
      example: 1
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    has_children:
      type: boolean
      x-nullable: true
      x-omitempty: true
      example: true

NodeWithSubtreeObject:
  type: object
  required:
    - "id"
    - "name"
    - "prev_id"
    - "full_name"
    - "directory"
    - "children"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    name:
      type: string
      example: "some_rule"
    prev_id:
      type: integer
      example: 0
    full_name:
      type: string
      example: "root/sub/leaf/tag"
    directory:
      type: object
      $ref: "#/DirectoryObject"
    signals:
      type: object
      $ref: "#/SignalsWithSubtreeObject"
    children:
      type: array
      items:
      $ref: "#/NodeWithSubtreeObject"
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"

# todo
SignalsWithSubtreeObject:
  type: object


# todo
UpdateNode:
  type: object

DirectoryObject:
  type: object
  required:
    - "id"
    - "name"
    - "created_at"
    - "updated_at"
  properties:
    id:
      type: integer
      example: 1
    name:
      type: string
      example: "some_tag"
    description:
      type: string
      pattern: "^.{2,200}$"
      example: "Tag"
    created_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
    updated_at:
      type: string
      format: "date-time"
      example: "2018-03-20T09:12:28.123Z"
      description: "ISO 8601 format"
